;18-649 Fall 2013
;Group 18
;Mustafa Yigit Bilgen (mbilgen)
;Yi Huo (yhuo)
;Sairam Krishnan (sbkrishn)
;Abhijit Lele(alele)
;
;Integration Test for SD 9a - Tests

#INCLUDE defines.mf

;Set up preconditions
;Assuming that the elevator started off moving to 1st floor.
;Get the elevator to 1st floor.
0s I DOOR_CLOSED_SENSOR_PERIOD N DOOR_CLOSED_SENSOR_[FRONT][LEFT]_CAN_ID DoorClosed FRONT LEFT = true
0s I DOOR_CLOSED_SENSOR_PERIOD N DOOR_CLOSED_SENSOR_[FRONT][RIGHT]_CAN_ID DoorClosed FRONT RIGHT = true
0s I DOOR_CLOSED_SENSOR_PERIOD N DOOR_CLOSED_SENSOR_[BACK][LEFT]_CAN_ID DoorClosed BACK LEFT = true
0s I DOOR_CLOSED_SENSOR_PERIOD N DOOR_CLOSED_SENSOR_[BACK][RIGHT]_CAN_ID DoorClosed BACK RIGHT = true

;#arc '1a/1b'
0s I CAR_BUTTON_CONTROL_PERIOD N CAR_CALL_[1][FRONT]_CAN_ID Boolean = true
0s I HALL_BUTTON_CONTROL_PERIOD N HALL_CALL_[1][BACK][UP]_CAN_ID Boolean = true

0.5s I AT_FLOOR_PERIOD N AT_FLOOR_[1][FRONT]_CAN_ID AtFloor 1 FRONT = true
0.5s I AT_FLOOR_PERIOD N AT_FLOOR_[1][BACK]_CAN_ID AtFloor 1 BACK = true
0.5s I DRIVE_PERIOD N DRIVE_SPEED_CAN_ID DriveSpeed = 0 STOP

;#arc '2a'
1s A N DESIRED_FLOOR_CAN_ID DesiredFloor : getFloor == 1
1s A N DESIRED_FLOOR_CAN_ID DesiredFloor : getDirection == UP
1s A N DESIRED_FLOOR_CAN_ID DesiredFloor : getHallway == BOTH

;#arc '2b'
1.0s A F DoorMotor FRONT LEFT : command == OPEN
1.0s A F DoorMotor FRONT RIGHT : command == OPEN
1.0s A F DoorMotor BACK LEFT : command == OPEN
1.0s A F DoorMotor BACK RIGHT : command == OPEN

;#arc '2c'
1.1s I DOOR_CLOSED_SENSOR_PERIOD N DOOR_CLOSED_SENSOR_[FRONT][LEFT]_CAN_ID DoorClosed FRONT LEFT = false
1.1s I DOOR_CLOSED_SENSOR_PERIOD N DOOR_CLOSED_SENSOR_[FRONT][RIGHT]_CAN_ID DoorClosed FRONT RIGHT = false
1.1s I DOOR_CLOSED_SENSOR_PERIOD N DOOR_CLOSED_SENSOR_[BACK][LEFT]_CAN_ID DoorClosed BACK LEFT = false
1.1s I DOOR_CLOSED_SENSOR_PERIOD N DOOR_CLOSED_SENSOR_[BACK][RIGHT]_CAN_ID DoorClosed BACK RIGHT = false

;#arc '3a'
1.8s A F CarLantern UP : lighted == true
1.8s A F CarLantern DOWN : lighted == false

;#arc '2d'
2.0s I DOOR_OPENED_SENSOR_PERIOD N DOOR_OPEN_SENSOR_[FRONT][LEFT]_CAN_ID DoorOpened FRONT LEFT = true
2.0s I DOOR_OPENED_SENSOR_PERIOD N DOOR_OPEN_SENSOR_[FRONT][RIGHT]_CAN_ID DoorOpened FRONT RIGHT = true
2.0s I DOOR_OPENED_SENSOR_PERIOD N DOOR_OPEN_SENSOR_[BACK][LEFT]_CAN_ID DoorOpened BACK LEFT = true
2.0s I DOOR_OPENED_SENSOR_PERIOD N DOOR_OPEN_SENSOR_[BACK][RIGHT]_CAN_ID DoorOpened BACK RIGHT = true

;#arc '2e'
2.5s A F DoorMotor FRONT LEFT : command == STOP
2.5s A F DoorMotor FRONT RIGHT : command == STOP
2.5s A F DoorMotor BACK LEFT : command == STOP
2.5s A F DoorMotor BACK RIGHT : command == STOP

;#arc '1c/1d'
5s I CAR_BUTTON_CONTROL_PERIOD N CAR_CALL_[1][FRONT]_CAN_ID Boolean = false
5s I HALL_BUTTON_CONTROL_PERIOD N HALL_CALL_[1][BACK][UP]_CAN_ID Boolean = false

;#arc '4a'
12.5s A F DoorMotor FRONT LEFT : command == CLOSE
12.5s A F DoorMotor FRONT RIGHT : command == CLOSE
12.5s A F DoorMotor BACK LEFT : command == CLOSE
12.5s A F DoorMotor BACK RIGHT : command == CLOSE


13.0s I DOOR_OPENED_SENSOR_PERIOD N DOOR_OPEN_SENSOR_[FRONT][LEFT]_CAN_ID DoorOpened FRONT LEFT = false
13.0s I DOOR_OPENED_SENSOR_PERIOD N DOOR_OPEN_SENSOR_[FRONT][RIGHT]_CAN_ID DoorOpened FRONT RIGHT = false
13.0s I DOOR_OPENED_SENSOR_PERIOD N DOOR_OPEN_SENSOR_[BACK][LEFT]_CAN_ID DoorOpened BACK LEFT = false
13.0s I DOOR_OPENED_SENSOR_PERIOD N DOOR_OPEN_SENSOR_[BACK][RIGHT]_CAN_ID DoorOpened BACK RIGHT = false


;#arc '4b'
15.0s I DOOR_CLOSED_SENSOR_PERIOD N DOOR_CLOSED_SENSOR_[FRONT][LEFT]_CAN_ID DoorClosed FRONT LEFT = true
15.0s I DOOR_CLOSED_SENSOR_PERIOD N DOOR_CLOSED_SENSOR_[FRONT][RIGHT]_CAN_ID DoorClosed FRONT RIGHT = true
15.0s I DOOR_CLOSED_SENSOR_PERIOD N DOOR_CLOSED_SENSOR_[BACK][LEFT]_CAN_ID DoorClosed BACK LEFT = true
15.0s I DOOR_CLOSED_SENSOR_PERIOD N DOOR_CLOSED_SENSOR_[BACK][RIGHT]_CAN_ID DoorClosed BACK RIGHT = true

;#arc '4c'
16s A F DoorMotor FRONT LEFT : command == STOP
16s A F DoorMotor FRONT RIGHT : command == STOP
16s A F DoorMotor BACK LEFT : command == STOP
16s A F DoorMotor BACK RIGHT : command == STOP

;#arc '5a'
16s A F CarLantern UP : lighted == false
16s A F CarLantern DOWN : lighted == false
